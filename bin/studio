#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

use Illuminate\Filesystem\Filesystem;
use Studio\Config\Config;
use Studio\Config\FileStorage;
use Studio\Console\CreateCommand;
use Studio\Console\LoadCommand;
use Studio\Creator;
use Symfony\Component\Console\Application;

$studioFile = getcwd().'/studio.json';

if (!file_exists($studioFile)) {
	throw new RuntimeException('There is no studio.json file in this directory.');
}

$config = new Config(new FileStorage($studioFile));

$application = new Application();
$application->add(new CreateCommand($config, new Creator(new Filesystem)));
$application->add(new LoadCommand);
$application->run();
